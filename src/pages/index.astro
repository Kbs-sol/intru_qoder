---
import BaseLayout from '@/layouts/BaseLayout.astro';
import ProductCard from '@/components/ProductCard.astro';
import SEOHead from '@/components/SEOHead.astro';
import { getProducts, getFeaturedProducts } from '@/lib/db';

const db = Astro.locals.runtime.env.DB;
let products: Awaited<ReturnType<typeof getProducts>> = [];
let featured: Awaited<ReturnType<typeof getFeaturedProducts>> = [];

try {
  [products, featured] = await Promise.all([getProducts(db), getFeaturedProducts(db)]);
} catch {
  // DB not connected yet - use empty arrays
}

const displayProducts = products.slice(0, 8);
const galleryImages = [
  'https://intru.in/cdn/shop/files/3.png?v=1748173500&width=1946',
  'https://intru.in/cdn/shop/files/99.png?v=1748173436&width=1946',
  'https://intru.in/cdn/shop/files/F51687B9-2BF2-43E0-988A-30272833B19E.jpg?v=1756359581&width=1920',
];
---

<BaseLayout
  title="intru | Minimal Streetwear India"
  description="Built from scratch with a shared love for minimalism & everyday style. Oversized fits, limited drops. Premium quality Indian streetwear starting at Rs 699."
>
  <SEOHead type="organization" />
  <SEOHead type="website" />

  <!-- HERO SECTION -->
  <section class="relative px-6 py-32 md:px-12 md:py-48 lg:px-24 min-h-[90vh] flex items-center">
    <div class="container-custom mx-auto">
      <div class="max-w-4xl space-y-8">
        <h1 class="text-6xl md:text-8xl lg:text-9xl font-bold tracking-tighter uppercase leading-[0.85] animate-fade-in-up">
          <span class="block">Minimal</span>
          <span class="block">Style</span>
          <span class="block">Maximum</span>
          <span class="block">Comfort</span>
        </h1>
        <p class="text-lg md:text-xl text-gray-500 font-medium max-w-lg leading-relaxed animate-fade-in-up" style="animation-delay: 0.2s;">
          Built from scratch in India with a shared love for minimalism & everyday style. Oversized fits, limited drops.
        </p>
        <div class="animate-fade-in-up" style="animation-delay: 0.4s;">
          <a href="/products" class="inline-block bg-black text-white px-12 py-4 text-[0.6875rem] font-black uppercase tracking-widest hover:bg-gray-800 transition-colors shadow-xl">
            Explore Basics
          </a>
        </div>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 animate-bounce-slow">
      <span class="text-[0.625rem] font-bold uppercase tracking-[0.2em] text-gray-400">Scroll</span>
      <svg width="16" height="24" viewBox="0 0 16 24" fill="none" class="text-gray-400">
        <path d="M8 16L8 8M8 16L4 12M8 16L12 12" stroke="currentColor" stroke-width="1.5" />
      </svg>
    </div>
  </section>

  <!-- IMAGE GALLERY MARQUEE -->
  <section class="py-20 border-y border-gray-100 overflow-hidden bg-gray-50">
    <div class="gallery-track">
      {[...galleryImages, ...galleryImages].map((src, i) => (
        <div class="gallery-item">
          <img src={src} alt="intru Collection" loading="lazy" />
        </div>
      ))}
    </div>
  </section>

  <!-- NEW ARRIVALS GRID -->
  <section id="collection" class="px-6 py-24 md:px-12 md:py-32 lg:px-24">
    <div class="container-custom mx-auto">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-20 gap-8">
        <div>
          <div class="text-[0.625rem] font-black uppercase tracking-[0.4em] text-gray-400 mb-4">Latest Drops</div>
          <h2 class="text-4xl md:text-6xl font-bold tracking-tighter uppercase leading-none">New Essentials</h2>
        </div>
        <a href="/products" class="text-[0.625rem] font-bold uppercase tracking-[0.3em] border-b border-black pb-2 hover:text-gray-500 transition-colors">
          View Collection
        </a>
      </div>

      {displayProducts.length > 0 ? (
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 md:gap-x-6 gap-y-12">
          {displayProducts.map(product => (
            <ProductCard product={product} />
          ))}
        </div>
      ) : (
        <div class="text-center py-20">
          <p class="text-gray-400 text-sm">Products loading soon. Connect your D1 database to see products.</p>
        </div>
      )}
    </div>
  </section>

  <!-- COLLECTIONS SECTION -->
  <section class="grid grid-cols-1 md:grid-cols-2 h-[600px] border-y border-gray-100">
    <div class="relative group overflow-hidden border-b md:border-b-0 md:border-r border-gray-100">
      <img
        src="https://intru.in/cdn/shop/files/F51687B9-2BF2-43E0-988A-30272833B19E.jpg?v=1756359581&width=1920"
        alt="T-Shirts Collection"
        class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"
        loading="lazy"
      />
      <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"></div>
      <div class="absolute bottom-12 left-12 z-10">
        <h3 class="text-4xl md:text-6xl font-bold text-white uppercase tracking-tighter mb-4">T-Shirts</h3>
        <a href="/products?category=T-Shirts" class="inline-block border border-white text-white px-8 py-3 text-[0.6875rem] font-bold uppercase tracking-widest hover:bg-white hover:text-black transition-all">
          Shop Now
        </a>
      </div>
    </div>
    <div class="relative group overflow-hidden">
      <img
        src="https://intru.in/cdn/shop/files/99.png?v=1748173436&width=1946"
        alt="Shirts Collection"
        class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700"
        loading="lazy"
      />
      <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"></div>
      <div class="absolute bottom-12 left-12 z-10">
        <h3 class="text-4xl md:text-6xl font-bold text-white uppercase tracking-tighter mb-4">Shirts</h3>
        <a href="/products?category=Shirts" class="inline-block border border-white text-white px-8 py-3 text-[0.6875rem] font-bold uppercase tracking-widest hover:bg-white hover:text-black transition-all">
          Shop Now
        </a>
      </div>
    </div>
  </section>

  <!-- BRAND STORY -->
  <section class="px-6 py-32 text-center bg-white">
    <div class="container-custom mx-auto max-w-3xl space-y-10">
      <svg class="w-8 h-8 mx-auto animate-pulse-slow" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
      <h2 class="text-3xl md:text-5xl font-bold uppercase tracking-tight leading-tight">
        "Built from scratch with a shared love for minimalism & everyday style."
      </h2>
      <p class="text-lg text-gray-500 font-medium max-w-xl mx-auto leading-relaxed">
        Intru represents a movement towards clutter-free living. We believe in high-quality fabrics, relaxed fits, and designs that speak without shouting.
      </p>
      <a href="/about" class="inline-block pt-4">
        <span class="text-[0.625rem] font-bold uppercase tracking-[0.3em] border-b border-black pb-2 hover:text-gray-500 transition-colors">
          Explore the Movement
        </span>
      </a>
    </div>
  </section>

  <!-- TRUST BADGES -->
  <section class="bg-white py-16 px-6 border-t border-gray-50">
    <div class="container-custom mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center md:text-left">
        <div class="space-y-4">
          <svg class="w-8 h-8 mx-auto md:mx-0 stroke-[1]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"/></svg>
          <h4 class="text-[0.625rem] font-black uppercase tracking-[0.3em]">Free Shipping</h4>
          <p class="text-xs text-gray-400 font-medium leading-relaxed">Fast & free shipping on all prepaid orders across India.</p>
        </div>
        <div class="space-y-4">
          <svg class="w-8 h-8 mx-auto md:mx-0 stroke-[1]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"/></svg>
          <h4 class="text-[0.625rem] font-black uppercase tracking-[0.3em]">COD Now Live</h4>
          <p class="text-xs text-gray-400 font-medium leading-relaxed">Pay when your order arrives. Stress-free shopping.</p>
        </div>
        <div class="space-y-4">
          <svg class="w-8 h-8 mx-auto md:mx-0 stroke-[1]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/></svg>
          <h4 class="text-[0.625rem] font-black uppercase tracking-[0.3em]">Secure Checkout</h4>
          <p class="text-xs text-gray-400 font-medium leading-relaxed">Your data is fully encrypted and secure with us.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- NEWSLETTER -->
  <section class="px-6 py-32 text-center bg-gray-50">
    <div class="container-custom mx-auto max-w-xl space-y-8">
      <div class="text-[0.625rem] font-black uppercase tracking-[0.5em] text-gray-400">Newsletter</div>
      <h2 class="text-4xl font-bold uppercase tracking-tighter">Stay Limited</h2>
      <p class="text-sm text-gray-500 font-medium">Join our mailing list for early access to drops and exclusive offers.</p>
      <form class="flex gap-4 max-w-md mx-auto relative border-b border-black/10 pb-2 focus-within:border-black transition-colors" onsubmit="return false;">
        <input type="email" placeholder="EMAIL ADDRESS" class="w-full bg-transparent outline-none placeholder:text-gray-300 text-[0.625rem] font-bold tracking-widest py-3 uppercase" required />
        <button type="submit" class="text-[0.625rem] font-black uppercase tracking-widest hover:opacity-50 transition-opacity">Join</button>
      </form>
    </div>
  </section>
</BaseLayout>
